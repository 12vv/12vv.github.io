<!DOCTYPE HTML>
<html>

<head><meta name="generator" content="Hexo 3.8.0">
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><link rel="bookmark" type="image/x-icon" href="/img/logo_miccall.png">
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    INTERSTELLAR
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/css/mic_main.css">
    <link rel="stylesheet" href="/css/dropdownMenu.css">
    <meta name="keywords" content="jaythan">
    
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css">
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css">
<link rel="stylesheet" href="/css/typo.css">
<!-- 文章页 -->
<body class="is-loading">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">JAYTHAN</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special">
            <ul class="menu links">
			<!-- Homepage  主页  --> 
			<li>
	            <a href="/" rel="nofollow">Home</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">Categories</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </li></ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/gallery/" title="Gallery">
		                Gallery
		            </a>
		        </li>
		        
		        <li>
		            <a href="/project/" title="Project">
		                Project
		            </a>
		        </li>
		        
		        <li>
		            <a href="/about/" title="About">
		                About
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/12vv" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="http://500px.com" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main">
            <div class="post_page_title_img" style="height: 25rem;background-image: url();background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;">
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2>Light and Color</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h3 id="电磁波谱-Electromagnetic-Spectrum"><a href="#电磁波谱-Electromagnetic-Spectrum" class="headerlink" title="电磁波谱 (Electromagnetic Spectrum)"></a>电磁波谱 (Electromagnetic Spectrum)</h3><p>依照波长的长短、频率以及波源的不同，电磁波谱可大致分为：无线电波、微波、红外线、可见光、紫外线、x射线和伽马射线。<br><img src="/images/stcg/electro.png" alt></p>
<p>波长($\lambda $)和能量($\Delta E$)的关系：$\lambda \Delta E = 1239.9$</p>
<h3 id="光谱-Spectrum"><a href="#光谱-Spectrum" class="headerlink" title="光谱 (Spectrum)"></a>光谱 (Spectrum)</h3><p>光谱可以看成是光子数目和波长的关系，又因为同样波长的光子，数目越多能量越大，所以也可以看成是波长和能量的关系。<br><img src="/images/stcg/dayavgspectrum.jpg" alt></p>
<p>然而基于上述关系构建的光谱渲染器(spectral renderer)代价太过高昂，因此考虑到使用红绿蓝的组合来模拟光(暂不考虑光的偏振，衍射和干涉等)。</p>
<h3 id="人眼-Human-eye"><a href="#人眼-Human-eye" class="headerlink" title="人眼 (Human eye)"></a>人眼 (Human eye)</h3><p>人的视网膜(retina)上的光度感应器(photodetector)是<code>视杆细胞(rods)</code>和<code>视锥细胞(cones)</code>。</p>
<p><img src="/images/stcg/retina.jpeg" alt></p>
<p><code>视锥细胞(cones)</code>在视网膜中央凹处(<code>fovea</code>)密度最大，而此处几乎没有<code>视杆细胞(rods)</code>。<code>视杆细胞(rods)</code>和<code>视锥细胞(cones)</code>的分布如下图所示。<br><img src="/images/stcg/rc.jpeg" alt></p>
<p>视杆细胞是感受弱光刺激的细胞，对光线的强弱反应非常敏感，主要在弱光下发挥作用，不能辨别颜色。比如，猫头鹰视网膜中视杆细胞较多，故夜间活动视觉灵敏。视锥细胞则可以在正常明度下，为我们提供视觉信息。</p>
<p>实际上在视网膜上存在着三种用来感知颜色的视锥细胞，他们分别叫做<code>S(Short)-视锥细胞</code>，<code>M(Middle)-视锥细胞</code>，<code>L(Long)-视锥细胞</code>，对应着波长的短，中，长。</p>
<p>每种视锥细胞都对某一个特定波长的颜色异常敏感。一般来说，<code>S-视锥细胞</code>对波长<code>420nm</code>的光线最为敏感，<code>M-视锥细胞</code>对<code>530nm</code>的波长最为敏感，而<code>L-视锥细胞</code>对于<code>560nm</code>的波长最为敏感。这也是为什么在计算机图形学中，颜色用<code>红绿蓝三原色red-green-blue (RGB)</code>来表示的原因。</p>
<p><img src="/images/stcg/conesrespond.jpg" alt></p>
<h3 id="三色理论-Trichromatic-Theory"><a href="#三色理论-Trichromatic-Theory" class="headerlink" title="三色理论 (Trichromatic Theory)"></a>三色理论 (Trichromatic Theory)</h3><h4 id="格拉斯曼颜色定律-Grassmann’s-laws"><a href="#格拉斯曼颜色定律-Grassmann’s-laws" class="headerlink" title="格拉斯曼颜色定律 (Grassmann’s laws)"></a>格拉斯曼颜色定律 (Grassmann’s laws)</h4><ul>
<li>Symmetry law</li>
<li>Transitive law</li>
<li>Proportionality law</li>
<li>Additivity law</li>
</ul>
<h4 id="配色实验-Color-Matching-Experiments"><a href="#配色实验-Color-Matching-Experiments" class="headerlink" title="配色实验 (Color Matching Experiments)"></a>配色实验 (Color Matching Experiments)</h4><blockquote>
<p>使用该实验确定的假想观察者，可将任意的可见光谱功率分布转换为一组三刺激值，从而量化地描述人类色觉。</p>
</blockquote>
<p>简单来说，就是认为调整三种不同波长的单色光(波长为分别为435.8, 546.1, 700 nm)的组合，使其和另一种颜色匹配(同色异谱：一种颜色的再现与观察颜色的光源特性有一定的关系。)，然后记录下这个波段的光对应的三原色的系数。得到下面的曲线。</p>
<p><img src="/images/stcg/matchexp.jpg" alt></p>
<h4 id="加色与减色-Additive-vs-Subtractive-Colors"><a href="#加色与减色-Additive-vs-Subtractive-Colors" class="headerlink" title="加色与减色 (Additive vs Subtractive Colors)"></a>加色与减色 (Additive vs Subtractive Colors)</h4><p><img src="/images/stcg/addsub.jpg" alt></p>
<h4 id="色彩空间-Color-Space"><a href="#色彩空间-Color-Space" class="headerlink" title="色彩空间 (Color Space)"></a>色彩空间 (Color Space)</h4><p><img src="/images/stcg/Colorspace.png" alt></p>
<p><img src="/images/stcg/rgbcs.jpg" alt="RGB色彩空间"></p>
<p>由于每个显示设备有自己<code>原色(primaries)的光谱分布(spectral distributions)</code>，所以即使有一张图片在RGB空间中定义，在不同设备上显示也可能不同。而且，使用RGB来表示颜色也有点不符合直觉，因为当我们看到“黄色”的时候，并不觉得是等同的“红”光和“绿”光混合成的，我们只觉得是一种“黄”色的光。所以，可以利用矩阵将RGB空间的转换为<code>CIE color spaces</code>或者它的变体(一个维度表示brightness，另外两个维度表示chromaticity)。</p>
<p><img src="/images/stcg/rgb4.jpg" alt="RGB色彩空间"></p>
<p><img src="/images/stcg/trans.jpg" alt="Transformations for standard RGB color spaces"></p>
<p>还有一种方法是使用更加直观的表示方法，即<code>Hue-Saturation-Value (HSV) color space</code>。</p>
<p><img src="/images/stcg/hsv.jpg" alt="Hue-Saturation-Value (HSV) color space"></p>
<ul>
<li>色调(H, Hue): 用角度度量，取值范围为0°～360°，从红色开始按逆时针方向计算，红色为0°，绿色为120°,蓝色为240°。</li>
<li>饱和度(S, Saturation): 表示颜色接近光谱色的程度。一种颜色，可以看成是某种光谱色与白色混合的结果。其中光谱色所占的比例愈大，颜色接近光谱色的程度就愈高(颜色越鲜明)，颜色的饱和度也就愈高。</li>
<li>明度(V/B, Value/Brightness): 明度表示颜色明亮的程度，对于光源色，明度值与发光体的光亮度有关；对于物体色，此值和物体的透射比或反射比有关。</li>
</ul>
<h3 id="色调映射-Tone-Mapping"><a href="#色调映射-Tone-Mapping" class="headerlink" title="色调映射 (Tone Mapping)"></a>色调映射 (Tone Mapping)</h3><blockquote>
<p>色调映射(Tone Mapping/ Tone Reproduction)，是在有限动态范围(dynamic range)媒介上近似显示高动态范围图像的一项计算机图形学技术。</p>
</blockquote>
<p>本质上来讲，色调映射是要解决的问题是进行大幅度的对比度衰减将场景亮度变换到可以显示的范围，同时要<strong>保持图像细节与颜色等对于表现原始场景非常重要的信息</strong>。</p>
<h4 id="动态范围-Dynamic-Range"><a href="#动态范围-Dynamic-Range" class="headerlink" title="动态范围 (Dynamic Range)"></a>动态范围 (Dynamic Range)</h4><blockquote>
<p>动态范围是可变化信号(例如声音或光)最大值和最小值的比值。也可以用以10为底的对数(分贝)或以2为底的对数表示。</p>
</blockquote>
<p>在传统图像中，每一个像素的RGB分别用用一位(byte)来表示，所以对于<code>低动态范图像(Low Dynamic Range images)</code>，每个颜色通道仅有256个不同的值。所以要保存<code>高动态范围成像(High Dynamic Range Imaging)</code>需要很大的文件格式。</p>
<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><p>为此，可以采用<code>色调映射</code>技术压缩高动态范围的图像的信息，得到的是JPEG格式图像。</p>
<p>另外，<code>高动态范围成像(High Dynamic Range Imaging)</code>的目的就是要正确地表示真实世界中从太阳光直射到最暗的阴影这样大的范围亮度。但是，CRT、LCD、打印机以及其它图像显示方法只能显示有限动态范围的图像，这些设备是低动态范围(Low Dynamic Range)的。所以采用<code>色调映射</code>技术来将HDR图像呈现到低动态范围的显示设备上。</p>
<p>由于目前大多数显示设备基于<code>8比特数模变换器(eight-bit D/A converters)</code>，所以可以把<code>色调映射</code>的过程看作是浮点数值到比特数的转换过程。</p>
<h4 id="基于频率的方法-Frequency-Based-Operators"><a href="#基于频率的方法-Frequency-Based-Operators" class="headerlink" title="基于频率的方法 (Frequency-Based Operators)"></a>基于频率的方法 (Frequency-Based Operators)</h4><p>假设图像中每个像素的亮度(luminance)近似于物体表面的<code>反射率(reflectance)</code>和<code>照度(illuminance)</code>的乘积。</p>
<script type="math/tex; mode=display">
L_v(x, y) = r(x, y)E_v(x, y)</script><p>下标v表示使用(photometrically weighted quantities)，取对数得到：</p>
<script type="math/tex; mode=display">
D(x, y) = log(L_v(x, y)) = log(r(x, y)E_v(x, y)) = log(r(x, y)) + log(E_v(x, y))</script><p>这样，成像被分成了<code>反射率(reflectance)</code>和<code>照度(illuminance)</code>两个分量的叠加。</p>
<p>因为<code>反射率(reflectance)</code>是<code>低动态范围(Low Dynamic Range)</code>，而<code>照度(illuminance)</code>是<code>高动态范围(High Dynamic Range)</code>的，如果能想办法分离这两个成分，主要压缩<code>高动态范围(High Dynamic Range)</code>部分即可。</p>
<p>对于典型的漫射场景，由于带纹理的表面以及表面边缘的存在，反射率分量倾向于表现出高<code>空间频率(spatial frequencies)</code>。而照度往往是空间上缓慢变化的函数。所以可以依据频率(使用傅立叶变换等方法)分离两个分量。压缩<code>照度(illuminance)</code>分量而保持<code>反射率(reflectance)</code>分量不变。</p>
<p>下面是一个应用例子，<code>Bilateral filtering</code>就是基于这个方法。</p>
<p><img src="/images/stcg/bf.jpg" alt="Bilateral filtering removes small details but preserves sharp gradients (left). The associated detail layer is shown on the right."></p>
<h3 id="Gamma校正-Gamma-Correction"><a href="#Gamma校正-Gamma-Correction" class="headerlink" title="Gamma校正 (Gamma Correction)"></a>Gamma校正 (Gamma Correction)</h3><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><blockquote>
<p>首先，我们的眼睛不像照相机那样感知光线。</p>
</blockquote>
<p>当两倍的光子击中传感器时，传感器就接收到两倍的信号(“线性”)。而当我们感知到两倍的光的时候只是觉得亮了一点(非线性)。</p>
<p><img src="/images/stcg/camvseyes.jpg" alt></p>
<p>与相机相比，人眼对暗色调的变化比对亮色调的变化更敏感。这种特性有一个生物学上的原因: 它使我们的视觉能够在更广泛的亮度范围内工作。</p>
<p>伽马矫正是我们眼睛的光敏感度和相机的光敏感度之间的转换。 当一个数字图像被保存下来时，它被“<code>伽玛编码(gamma encoded)</code>”—-使一个数字图像中两倍的数值我们所感知的两倍亮度的数值更为接近。</p>
<h4 id="Gamma定义"><a href="#Gamma定义" class="headerlink" title="Gamma定义"></a>Gamma定义</h4><script type="math/tex; mode=display">
Vout = Vin^{gamma}</script><ul>
<li><code>Vout</code>: 是输出亮度值。</li>
<li><code>Vin</code>: 输入/实际亮度值。</li>
</ul>
<p>当<code>gamma&lt;1</code>时，直线向上拱起，当<code>gamma&gt;1</code>时则向下凹。</p>
<blockquote>
<p>另外，伽玛编码图像能更有效地存储色调(tone)。 </p>
</blockquote>
<p>由于伽马编码将色调层次重新分配到更接近我们眼睛感知的层次，因此描述给定色调范围所需的比特更少。 也就是说，因为人眼对于暗色调更加敏感，伽马矫正就在暗色调区间划分了更多层，提高了存储空间的利用率。否则，过多的比特将用于描述较明亮的色调(相机相对更敏感，人眼较不敏感) ，而缺少比特将用于描述较暗的色调。<br><img src="/images/stcg/gamma2.jpg" alt></p>
<p>另外，如上图所示，伽玛编码将色调几乎均匀地在整个范围内划分(perceptually uniform)。</p>
<h4 id="GAMMA-WORKFLOW"><a href="#GAMMA-WORKFLOW" class="headerlink" title="GAMMA WORKFLOW"></a>GAMMA WORKFLOW</h4><p><img src="/images/stcg/workflow.jpg" alt></p>
<h5 id="Image-Gamma"><a href="#Image-Gamma" class="headerlink" title="Image Gamma"></a>Image Gamma</h5><p>通常<code>image gamma</code>的设置嵌入在图像文件中，大多数图像设置gamma值为1/2.2，(如上图左一)。当相机将捕获的图像转换为标准<code>JPEG</code>或<code>TIFF</code>文件格式时应用gamma将本地相机的色调层次重新分配到感知更加均匀的层次中。<br><img src="/images/stcg/imggamma.jpg" alt></p>
<h5 id="Display-Gamma"><a href="#Display-Gamma" class="headerlink" title="Display Gamma"></a>Display Gamma</h5><p>主要目的是补偿<code>image gamma</code>，使得图像显示在屏幕上有合适的亮度。更高的<code>Display Gamma</code>导致更暗且对比度更高的图像。</p>
<p><img src="/images/stcg/disgamma.jpg" alt></p>
<h5 id="System-Gamma"><a href="#System-Gamma" class="headerlink" title="System Gamma"></a>System Gamma</h5><p>同<code>viewing gamma</code>。为了更真实的再现一个场景，理想的情况是<code>gamma = 1.0</code>，那么<code>Vout = Vin</code>，即原场景的光与屏幕上显示的光相同。然而为了提高对比度，会设置gamma略大于1。这样可以弥补显示设备的<code>动态范围(dynamic range)</code>的限制。</p>
<blockquote>
<p>Gamma correction is applied to the gamma encoded (compressed)<br>images to convert them back to the original scene luminance.</p>
</blockquote>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="http://web.stanford.edu/class/cs148/lectures.html" target="_blank" rel="noopener">Stanford CS148 Introduction to Computer Graphics and Imaging (Fall 2019)</a></li>
<li>Fundamentals of Computer Graphics, 4th Edition.<br>Steve Marschner and Peter Shirley, A K Peters/CRC Press, 2015. (Ch21, Ch22, Ch23)</li>
<li>OpenGL Programming Guide: The Official Guide to Learning OpenGL, Version 4.3 (8th Edition) Dave Shreiner, Addison-Wesley Professional, 2013. (Ch7)</li>
<li><a href="https://www.scratchapixel.com/lessons/digital-imaging/colors/introduction" target="_blank" rel="noopener">Introduction to Light, Color and Color Space</a></li>
<li><a href="https://www.cambridgeincolour.com/tutorials/gamma-correction.htm" target="_blank" rel="noopener">UNDERSTANDING GAMMA CORRECTION</a></li>
</ol>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://12vv.github.io/2020/02/18/stcg02/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://12vv.github.io/2020/02/18/stcg02/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <!-- <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li> -->
            </ul>
            
				<!-- <span id="busuanzi_container_site_pv"> 2021 </span>  -->
                <span id="busuanzi_container_site_pv">Copyright &copy; 2020 - 2021 All Rights Reserved.<p></p>
			
        </span></div>
    </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src>
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>



 	
</html>
