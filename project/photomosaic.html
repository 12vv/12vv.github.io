<!DOCTYPE html>
<html lang>

<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Jaythan">



    <meta name="description" content="Do not go into that gentle night.">



<title>Photographic Mosaic | Jay&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<link rel="alternate" href="/atom.xml" title="Jay's Blog" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Jay&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Jay&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    <article class="post-wrap page">
        
        <h2 class="post-title">Photographic Mosaic</h2>
        
        <section class="post-content">
            <h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Cartwright (2007) p.102 quote: <a href="https://en.wikipedia.org/wiki/Photographic_mosaic" target="_blank" rel="noopener">Photographic mosaic</a>, also known as Photomosaic, a portmanteau of photo and mosaic, is a picture that is divided into small sections. When viewed as a whole, it appears to be one image, when in fact the image is made up of hundreds or even thousands of smaller images.</p>
<h3 id="Credit"><a href="#Credit" class="headerlink" title="Credit"></a>Credit</h3><p>This project is inspired by one of <a href="https://robertheaton.com/2018/11/03/programming-project-4-photomosaics/" target="_blank" rel="noopener">ROBERT HEATON’s articles</a>. It explained in details of how to complete the program, and provided some <a href="https://github.com/robert/photomosaic" target="_blank" rel="noopener">example codes</a> wrote in <code>Python</code>. I used the source images from his <a href="https://github.com/robert/photomosaic/tree/master/example_square_images" target="_blank" rel="noopener">repo</a>.</p>
<h3 id="Develope-environment"><a href="#Develope-environment" class="headerlink" title="Develope environment"></a>Develope environment</h3><p>As a practice, I finished this project using <code>C++</code> and <code>OpenCV</code> library.</p>
<ul>
<li><strong>OpenCV</strong> 4.4.0</li>
<li><strong>Apple clang</strong> version 12.0.0</li>
<li><strong>XCode</strong> 12</li>
</ul>
<h2 id="Final-results"><a href="#Final-results" class="headerlink" title="Final results"></a>Final results</h2><p><img src="/images/projects/mosaic2.png" alt="Vincent van Gogh"></p>
<p>The mosaic result of the self-portrait of Vincent van Gogh looks greeny because the source square images I took from the repo, which are the composition of the big image, are all related to flowers. Because there are only 32 source images, so there are lots of duplicates when composing the big image.</p>
<p><img src="/images/projects/ssfolder.png" alt="Source image samples"></p>
<p>I did another experiment in this <a href="https://www.flyingflowers.co.uk/page/flower_names_and_origins" target="_blank" rel="noopener">flower picture</a>.</p>
<p><img src="/images/projects/mosaic3.png" alt="Source image samples"></p>
<h2 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h2><p>There are some functions provided by the OpenCV library that can help in the series of processes.</p>
<p>The first step is to divided the origin image into desired grid.</p>
<p><img src="/images/projects/mosaic_step1and2.png" alt="Pixelation"></p>
<p>Then, calculate the average color of each grid, and choose an image from source which have the least different than the grid.</p>
<p>OpenCV provides </p>
<p>calculate differences</p>
<p><a href="https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#absdiff" target="_blank" rel="noopener">absdiff</a> in OpenCV library can be used to calculates the per-element absolute difference between two arrays or between an array and a scalar.</p>
<p>resize source image and replace</p>
<p><img src="/images/projects/mosaic_step2_1.png" alt="Replacement process with 10x10 grid size"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><p><a href="https://en.wikipedia.org/wiki/Photographic_mosaic" target="_blank" rel="noopener">Photographic mosaic on Wiki</a></p>
</li>
<li><p><a href="https://robertheaton.com/2018/11/03/programming-project-4-photomosaics/" target="_blank" rel="noopener">Programming Projects for Advanced Beginners #4: Photomosaics</a></p>
</li>
</ol>

        </section>
    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Jaythan | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>